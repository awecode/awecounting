{% extends "_base.html" %}
{% load i18n %}
{% load staticfiles %}

{% block title %}{{ obj.name }}{% endblock %}

{% load filters %}

{% block head_end %}
    <script src="{% static 'js/inventory/inventory_account.js' %}"></script>
    <script>
        ko_data = {{data|jsonify}};
    </script>
{% endblock %}

{% block content %}

    <h1>{{ obj.item.name }}</h1>
    <br>
    {% trans 'Unit' %} : {{ current_unit }}
    <br>
    <form method="POST">
        {% csrf_token %}
        <label for="unit-convert">Convert to:</label>
        <select name="unit-convert-option" id="unit-convert">
            {% for unit in units %}
            <option value="{{ unit.id }}">{{ unit.name }}</option>
            {% endfor %}
        </select>
        <input type="submit">
    </form>
    <br><br>

    <table class="table table-striped table-bordered">
        <thead>
        <tr>
            <th rowspan="2">{% trans 'Date' %}</th>
            <th rowspan="2">{% trans 'Voucher No.' %}</th>
            <th colspan="3">{% trans 'Purchases' %}</th>
            <th colspan="3">{% trans 'Sales' %}</th>
            <th rowspan="2">{% trans 'Current Balance' %}</th>

        </tr>
        <tr>
            <th>{% trans "Quantity" %}</th>
            <th>{% trans "Rate" %}</th>
            <th>{% trans "Total" %}</th>
            <th>{% trans "Quantity" %}</th>
            <th>{% trans "Rate" %}</th>
            <th>{% trans "Total" %}</th>

        </tr>
        </thead>
        <tbody data-bind="with: table_vm">
        <!-- ko foreach:rows -->
        <tr>
            <td data-bind="text: date(), localize: 1"></td>
            <td data-bind="text: voucher_no(), localize: 1"></td>
            <td data-bind="text: income_quantity(), localize: 1"></td>
            <td data-bind="text: income_rate(), localize: 1"></td>
            <td data-bind="text: income_total(), localize: 1"></td>

            <td data-bind="text: expense_quantity(), localize: 1"></td>
            <td data-bind="text: expense_rate(), localize: 1"></td>
            <td data-bind="text: expense_total(), localize: 1"></td>

            <td data-bind="text: current_balance(), localize: 1"></td>
            <td data-bind="visible:expense_flag">(<span data-bind="text:e1">a</span>:<span data-bind="text:r1">a</span>) (<span data-bind="text:e2">a</span>:<span data-bind="text:r2">a</span>)</td>

        </tr>
        <!-- /ko -->
        </tbody>
    </table>


{% endblock %}